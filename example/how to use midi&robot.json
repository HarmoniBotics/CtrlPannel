{"blocks":{"languageVersion":0,"blocks":[{"type":"local_declaration_statement","id":";5Q4rk#T06[+V3s0!Oan","x":-237,"y":188,"extraState":"<mutation><localname name=\"midi\"></localname></mutation>","fields":{"VAR0":"midi"},"inputs":{"DECL0":{"block":{"type":"procedure_call_by_name","id":"0uKB8E)q#z4.sRLUBrFB","icons":{"comment":{"text":"展示了如何从字典中取函数调用。\n注意，不能用返回默认值的块进行函数取用，因为this的指向会改变","pinned":false,"height":80,"width":160}},"inputs":{"NAME":{"block":{"type":"dictionaries_lookup_dot","id":"7R]qnuaL{FPneKp5Awzl","inputs":{"DICT":{"block":{"type":"midi_read","id":"4kAk$:qxOfM!6R#l+4zb","inputs":{"MidiFile":{"block":{"type":"midi_file_open","id":"#u`%I3h~DA)I=r59K-rN"}}}}},"KEY":{"block":{"type":"text","id":"*P44M^*vql70fUTzk~BH","fields":{"TEXT":"JSON"}}}}}},"PARAMS":{"block":{"type":"lists_create_with","id":"8BW(l30?(x7JT9l8z|tD","extraState":{"itemCount":0}}}}}},"STACK":{"block":{"type":"local_declaration_statement","id":"h+ww3M{w2[YReh$2T%DR","extraState":"<mutation><localname name=\"音轨\"></localname><localname name=\"速度\"></localname><localname name=\"tick\"></localname></mutation>","fields":{"VAR0":"音轨","VAR1":"速度","VAR2":"tick"},"inputs":{"DECL0":{"block":{"type":"dictionaries_lookup","id":"UPlHo/[t$T:tv)=bdCTL","inputs":{"DICT":{"block":{"type":"lexical_variable_get","id":"LMg:LlT)SzJe!is!sg:$","fields":{"VAR":"midi"}}},"KEY":{"block":{"type":"text","id":"N?UQ7GTwmS,V((z:U|}A","fields":{"TEXT":"tracks"}}},"NOTFOUND":{"block":{"type":"lists_create_with","id":"qd(S^GX8lx.~@zVgf.CO","extraState":{"itemCount":0}}}}}},"DECL1":{"block":{"type":"dictionaries_lookup_dot","id":"YvTYtAjKzJ+vP]76,[N`","inputs":{"DICT":{"block":{"type":"lists_getIndex","id":"?4~]8rg+S-|mCb|vLf1L","fields":{"MODE":"GET","WHERE":"FROM_START"},"inputs":{"VALUE":{"block":{"type":"dictionaries_recursive_lookup","id":"A][BsJ;#w:0kGBduQJat","inputs":{"DICT":{"block":{"type":"lexical_variable_get","id":"nCpYk!*WqGM_(U`[{;zk","fields":{"VAR":"midi"}}},"PATH":{"block":{"type":"text","id":"lf=!|N3:lT6Fj4@O(Hn`","fields":{"TEXT":"header.tempos"}}},"NOTFOUND":{"block":{"type":"lists_create_with","id":"sU!tbSYAfGKK]x}+{3J$","extraState":{"itemCount":0}}}}}},"AT":{"block":{"type":"math_number","id":"O)H1hGqa9/!lVSkIPzW#","fields":{"NUM":1}}}}}},"KEY":{"block":{"type":"text","id":"=cSA@/W`?Cw/;kl:fC}!","fields":{"TEXT":"bpm"}}}}}},"DECL2":{"block":{"type":"dictionaries_recursive_lookup","id":"EKD,iaJ)7Sh$x+U[ATb9","inputs":{"DICT":{"block":{"type":"lexical_variable_get","id":"ea,Mcc7!,)k|Ohx?z;O#","fields":{"VAR":"midi"}}},"PATH":{"block":{"type":"text","id":":jU6jrX9|!qBiHxC3VTQ","fields":{"TEXT":"header.tick"}}},"NOTFOUND":{"block":{"type":"math_number","id":"CGjDc:me#t5`cIsuK$;f","fields":{"NUM":480}}}}}},"STACK":{"block":{"type":"local_declaration_statement","id":"k8Jhr{Y~(P($pLq8^e3{","extraState":"<mutation><localname name=\"时长\"></localname></mutation>","fields":{"VAR0":"时长"},"inputs":{"DECL0":{"block":{"type":"math_arithmetic","id":"U~47/~x/n2M`U07w8}Qu","fields":{"OP":"DIVIDE"},"inputs":{"A":{"shadow":{"type":"math_number","id":"hiS(B8|kbEJ|A]#;/DS]","fields":{"NUM":60000}}},"B":{"shadow":{"type":"math_number","fields":{"NUM":1}},"block":{"type":"math_arithmetic","id":"K?F7K|tNWso=9Fv:P3;]","fields":{"OP":"MULTIPLY"},"inputs":{"A":{"shadow":{"type":"math_number","fields":{"NUM":1}},"block":{"type":"lexical_variable_get","id":"zXI*RT?bMZ!mlkKa{8To","fields":{"VAR":"速度"}}},"B":{"shadow":{"type":"math_number","fields":{"NUM":1}},"block":{"type":"lexical_variable_get","id":"|qBBXRzVxhHun}fb^Y:}","fields":{"VAR":"tick"}}}}}}}}},"STACK":{"block":{"type":"controls_if","id":"KdK?HqbA-#x*wv/N[GYQ","inputs":{"IF0":{"block":{"type":"logic_compare","id":"$7ZAk[ax{.yjTXsWkS@{","fields":{"OP":"GT"},"inputs":{"A":{"block":{"type":"lists_length","id":"O/~X$9#/Zoq|#p/f{qST","inputs":{"VALUE":{"block":{"type":"lexical_variable_get","id":"$vfKw!YQGaFRc`~y!2sM","fields":{"VAR":"音轨"}}}}}},"B":{"block":{"type":"math_number","id":"`U;?$^Q{_?nHs2N6kuH`","fields":{"NUM":0}}}}}},"DO0":{"block":{"type":"local_declaration_statement","id":"b5NJ+kuz)XJGwb]+|^19","extraState":"<mutation><localname name=\"第一音轨\"></localname></mutation>","fields":{"VAR0":"第一音轨"},"inputs":{"DECL0":{"block":{"type":"lists_getIndex","id":"t~?B^+bMN]aX5Oc@!`uP","fields":{"MODE":"GET","WHERE":"FROM_START"},"inputs":{"VALUE":{"block":{"type":"lexical_variable_get","id":"Wo?C45Q!r^F?#cFBKj@X","fields":{"VAR":"音轨"}}},"AT":{"block":{"type":"math_number","id":":*M?.pJ36@Gx4o,@z]{(","fields":{"NUM":1}}}}}},"STACK":{"block":{"type":"local_declaration_statement","id":"CjPU*z_-2Hdl|^J=8X;e","extraState":"<mutation><localname name=\"音符\"></localname></mutation>","fields":{"VAR0":"音符"},"inputs":{"DECL0":{"block":{"type":"dictionaries_lookup","id":"yWN+3U`^$2|@/#NA3:},","inputs":{"DICT":{"block":{"type":"lexical_variable_get","id":"hf^[%?LCm%%`C;hS/X8]","fields":{"VAR":"第一音轨"}}},"KEY":{"block":{"type":"text","id":"*`aMx(WV+GN$6ACx6r6I","fields":{"TEXT":"notes"}}},"NOTFOUND":{"block":{"type":"lists_create_with","id":"Fyk;1GX@V]/;ICY(~ipj","extraState":{"itemCount":0}}}}}},"STACK":{"block":{"type":"controls_forEach","id":"L6t:5d],JLEk#xRnLy|s","fields":{"VAR":"note"},"inputs":{"LIST":{"block":{"type":"lexical_variable_get","id":"*~*Bi#|PfuG[V@)YQe5E","fields":{"VAR":"音符"}}},"DO":{"block":{"type":"kqrobot_intensity","id":"h7dSp]o}Jg0_xURbcGu{","inputs":{"INTENSITY":{"block":{"type":"math_arithmetic","id":"x/7umlD:RuQ)ICgHbQ/m","fields":{"OP":"MULTIPLY"},"inputs":{"A":{"shadow":{"type":"math_number","id":"K$VEd2_F8CfQG34v,,w^","fields":{"NUM":32}}},"B":{"shadow":{"type":"math_number","fields":{"NUM":1}},"block":{"type":"dictionaries_lookup_dot","id":"R1vd),o/JEb6kDD8;lFU","inputs":{"DICT":{"block":{"type":"lexical_variable_get","id":".Yh-~VXI)bM/Hmph*a[N","fields":{"VAR":"note"}}},"KEY":{"block":{"type":"text","id":"Q3|0s}+0Igm_)26|=p(n","fields":{"TEXT":"intensity"}}}}}}}}}},"next":{"block":{"type":"kqrobot_play","id":"8:^jY#k?th{ujIq`RGV_","inputs":{"NOTE":{"block":{"type":"kqrobot_midi2","id":"kkkFxBe(0QjN(L[e1oUi","inputs":{"NOTE":{"block":{"type":"dictionaries_lookup_dot","id":"5?C}*xLVu,-9#CFbks9h","inputs":{"DICT":{"block":{"type":"lexical_variable_get","id":"`sCz_e4%1+.[9t~ESTuE","fields":{"VAR":"note"}}},"KEY":{"block":{"type":"text","id":"a$c*rs;?8MGYBR5!+.E7","fields":{"TEXT":"midi"}}}}}},"LOW":{"shadow":{"type":"math_number","id":"94W,gX}*N-kvakqJ_H4G","fields":{"NUM":4}}}}}}},"next":{"block":{"type":"controls_delay","id":"yPsIQ~=r)V#dqX7r[`-5","inputs":{"time":{"shadow":{"type":"math_number","fields":{"NUM":1000}},"block":{"type":"math_arithmetic","id":"lI;wttK{U-35A?Jh1XLf","fields":{"OP":"ADD"},"inputs":{"A":{"shadow":{"type":"math_number","id":"bR$HIV-(%3U{WhTTMt|V","fields":{"NUM":1}},"block":{"type":"lexical_variable_get","id":"E$][-=dQ[m*97fxv`dk|","fields":{"VAR":"时长"}}},"B":{"shadow":{"type":"math_number","id":"D:t.r,gNJ24%oz.{e^DM","fields":{"NUM":1}},"block":{"type":"dictionaries_lookup_dot","id":"}P({8$5Qn~|DT/29.`D|","inputs":{"DICT":{"block":{"type":"lexical_variable_get","id":"Nv]A]Ut2fM@WEg#,Z~g;","fields":{"VAR":"note"}}},"KEY":{"block":{"type":"text","id":"{~z}e+i,lu.9w}I$B4Oc","fields":{"TEXT":"durationTicks"}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}]},"backpack":[{"type":"local_declaration_statement","extraState":"<mutation><localname name=\"midi\"></localname></mutation>","fields":{"VAR0":"midi"},"inputs":{"DECL0":{"block":{"type":"procedure_call_by_name","icons":{"comment":{"text":"展示了如何从字典中取函数调用。\n注意，不能用返回默认值的块进行函数取用，因为this的指向会改变"}},"inputs":{"NAME":{"block":{"type":"dictionaries_lookup_dot","inputs":{"DICT":{"block":{"type":"midi_read","inputs":{"MidiFile":{"block":{"type":"midi_file_open"}}}}},"KEY":{"block":{"type":"text","fields":{"TEXT":"JSON"}}}}}},"PARAMS":{"block":{"type":"lists_create_with","extraState":{"itemCount":0}}}}}},"STACK":{"block":{"type":"local_declaration_statement","extraState":"<mutation><localname name=\"音轨\"></localname><localname name=\"速度\"></localname><localname name=\"tick\"></localname></mutation>","fields":{"VAR0":"音轨","VAR1":"速度","VAR2":"tick"},"inputs":{"DECL0":{"block":{"type":"dictionaries_lookup","inputs":{"DICT":{"block":{"type":"lexical_variable_get","fields":{"VAR":"midi"}}},"KEY":{"block":{"type":"text","fields":{"TEXT":"tracks"}}},"NOTFOUND":{"block":{"type":"lists_create_with","extraState":{"itemCount":0}}}}}},"DECL1":{"block":{"type":"dictionaries_lookup_dot","inputs":{"DICT":{"block":{"type":"lists_getIndex","fields":{"MODE":"GET","WHERE":"FROM_START"},"inputs":{"VALUE":{"block":{"type":"dictionaries_recursive_lookup","inputs":{"DICT":{"block":{"type":"lexical_variable_get","fields":{"VAR":"midi"}}},"PATH":{"block":{"type":"text","fields":{"TEXT":"header.tempos"}}},"NOTFOUND":{"block":{"type":"lists_create_with","extraState":{"itemCount":0}}}}}},"AT":{"block":{"type":"math_number","fields":{"NUM":1}}}}}},"KEY":{"block":{"type":"text","fields":{"TEXT":"bpm"}}}}}},"DECL2":{"block":{"type":"dictionaries_recursive_lookup","inputs":{"DICT":{"block":{"type":"lexical_variable_get","fields":{"VAR":"midi"}}},"PATH":{"block":{"type":"text","fields":{"TEXT":"header.tick"}}},"NOTFOUND":{"block":{"type":"math_number","fields":{"NUM":480}}}}}},"STACK":{"block":{"type":"local_declaration_statement","extraState":"<mutation><localname name=\"时长\"></localname></mutation>","fields":{"VAR0":"时长"},"inputs":{"DECL0":{"block":{"type":"math_arithmetic","fields":{"OP":"DIVIDE"},"inputs":{"A":{"shadow":{"type":"math_number","fields":{"NUM":60000}}},"B":{"shadow":{"type":"math_number","fields":{"NUM":1}},"block":{"type":"math_arithmetic","fields":{"OP":"MULTIPLY"},"inputs":{"A":{"shadow":{"type":"math_number","fields":{"NUM":1}},"block":{"type":"lexical_variable_get","fields":{"VAR":"速度"}}},"B":{"shadow":{"type":"math_number","fields":{"NUM":1}},"block":{"type":"lexical_variable_get","fields":{"VAR":"tick"}}}}}}}}},"STACK":{"block":{"type":"controls_print","inputs":{"msg":{"shadow":{"type":"text","fields":{"TEXT":"!"}},"block":{"type":"lexical_variable_get","fields":{"VAR":"时长"}}}},"next":{"block":{"type":"controls_if","inputs":{"IF0":{"block":{"type":"logic_compare","fields":{"OP":"GT"},"inputs":{"A":{"block":{"type":"lists_length","inputs":{"VALUE":{"block":{"type":"lexical_variable_get","fields":{"VAR":"音轨"}}}}}},"B":{"block":{"type":"math_number","fields":{"NUM":0}}}}}},"DO0":{"block":{"type":"local_declaration_statement","extraState":"<mutation><localname name=\"第一音轨\"></localname></mutation>","fields":{"VAR0":"第一音轨"},"inputs":{"DECL0":{"block":{"type":"lists_getIndex","fields":{"MODE":"GET","WHERE":"FROM_START"},"inputs":{"VALUE":{"block":{"type":"lexical_variable_get","fields":{"VAR":"音轨"}}},"AT":{"block":{"type":"math_number","fields":{"NUM":1}}}}}},"STACK":{"block":{"type":"local_declaration_statement","extraState":"<mutation><localname name=\"音符\"></localname></mutation>","fields":{"VAR0":"音符"},"inputs":{"DECL0":{"block":{"type":"dictionaries_lookup","inputs":{"DICT":{"block":{"type":"lexical_variable_get","fields":{"VAR":"第一音轨"}}},"KEY":{"block":{"type":"text","fields":{"TEXT":"notes"}}},"NOTFOUND":{"block":{"type":"lists_create_with","extraState":{"itemCount":0}}}}}},"STACK":{"block":{"type":"controls_forEach","fields":{"VAR":"note"},"inputs":{"LIST":{"block":{"type":"lexical_variable_get","fields":{"VAR":"音符"}}},"DO":{"block":{"type":"kqrobot_intensity","inputs":{"INTENSITY":{"block":{"type":"math_arithmetic","fields":{"OP":"MULTIPLY"},"inputs":{"A":{"shadow":{"type":"math_number","fields":{"NUM":32}}},"B":{"shadow":{"type":"math_number","fields":{"NUM":1}},"block":{"type":"dictionaries_lookup_dot","inputs":{"DICT":{"block":{"type":"lexical_variable_get","fields":{"VAR":"note"}}},"KEY":{"block":{"type":"text","fields":{"TEXT":"intensity"}}}}}}}}}},"next":{"block":{"type":"kqrobot_play","inputs":{"NOTE":{"block":{"type":"kqrobot_midi2","inputs":{"NOTE":{"block":{"type":"dictionaries_lookup_dot","inputs":{"DICT":{"block":{"type":"lexical_variable_get","fields":{"VAR":"note"}}},"KEY":{"block":{"type":"text","fields":{"TEXT":"midi"}}}}}},"LOW":{"shadow":{"type":"math_number","fields":{"NUM":4}}}}}}},"next":{"block":{"type":"controls_delay","inputs":{"time":{"shadow":{"type":"math_number","fields":{"NUM":1000}},"block":{"type":"dictionaries_lookup_dot","inputs":{"DICT":{"block":{"type":"lexical_variable_get","fields":{"VAR":"note"}}},"KEY":{"block":{"type":"text","fields":{"TEXT":"durationTicks"}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"kind":"BLOCK"}]}